---
title: "Report BI 2021/2022 - Grupo 1"
date: "`r Sys.Date()`"
author: 20191393, 20190048, 20181339
output:
  rmdformats::robobook:
    code_folding: show
    toc: 3
    thumbnails: false
    lightbox: true
    gallery: false
    cache: false
    highlight: kate
---

```{r config, include=FALSE}
# bibliotecas --- modificar sempre que acrescentar uma biblioteca
bibliotecas <- c("knitr", "rmdformats", "readxl", "lubridate", "ggplot2", "DT")
for (bibl in bibliotecas) {
    if (bibl %in% rownames(installed.packages()) == FALSE){
        install.packages(bibl, dependencies = TRUE)
        library(bibl, character.only = TRUE)    
    }
     else {
        library(bibl, character.only = TRUE)
     }
}
rm(bibl, bibliotecas)

# knit: opções globais --- não modificar!
options(max.print="80")
opts_chunk$set(echo=FALSE,
	           cache=FALSE,
               prompt=FALSE,
               tidy=TRUE,
               comment=NA,
               message=FALSE,
               warning=TRUE)
opts_knit$set(width=80)
```

## Autores

-   Turma: T62
-   Grupo: G01/T62
-   Autores
    -   20191393 Ana Catarina Quintans - General Manager
    -   20190048 Carlos Chantre - Tech Lead
    -   20181339 Pedro Amaral - Market Analyst

## Introdução

Inserir introdução...

## Marketing

Mostra-se um exemplo de código incluído neste ficheiro que produz o relatório!

```{r M1}
if (file.exists("customers.Rda") == FALSE) {
   cat("Dude, é preciso construir o dataframe customers!")
} else {
        load("customers.Rda")
}
```

### Perfil dos clientes

Apresentam-se algumas características dos clientes ...

-   **Rendimento**

Os clientes tem rendimeto baixo.

-   **Género**

```{r G1, eval = TRUE, echo = TRUE}
load("customers.Rda")
plot(as.factor(customers$MaritalStatus))
```

-   **Conclusões**



# Propostas para análise
## Departamento de Marketing
### Clientes
#### Qual o perfil do nosso cliente mais rentável? E do menos rentável?
#### Que variáveis dos clientes interferem positivamente no consumo das nossas bicicletas?

### Produto
#### O que é que se vende mais? De que categoria? De que subcategoria?

Nesta análise propõe-se avaliar as vendas da empresa numa abordagem *"general to detailed"* , de forma a que se desenhe uma perspetiva geral do desempenho, seguido de um estudo mais aprofundando, envolvendo as subcategorias das categorias principais. A análise terá foco tanto em quantidades
como em valores monetários.

### Por Categoria X Quantidades
```{r}
load("sales_product.Rda")
plot(as.factor(sales_product$Category))
```

### Por Valor

```{r}
# Total Accessories Sales
accs_sales_amount <- 
    as.numeric(round(sum(sales_product$SalesAmount[which(sales_product$Category == "Accessories")])))

# Total Bike Sales
bike_sales_amount <- 
    as.numeric(round(sum(sales_product$SalesAmount[which(sales_product$Category == "Bikes")])))

# Total Clothing Sales
clothing_sales_amount <- 
    as.numeric(round(sum(sales_product$SalesAmount[which(sales_product$Category == "Clothing")])))

valores <- 
    c("Accessories" = accs_sales_amount, 
      "Bikes" = bike_sales_amount,
      "Clothing" = clothing_sales_amount)

```



**Accessories**


**Bikes** 

**Clothing**


#### Os novos produtos estão a vender mais ou menos que os anteriores?

### Região
#### Onde é que se vendeu mais?
#### Em que alturas é que se vende mais? Existe sazonalidade?

## Departamento de Vendas
### Produto
#### -Quais os canais de vendas com mais escoabilidade de produtos?


## Departamento Financeiro
### Produto
#### Saber quais são os produtos com maior rentabilidade?

# Apêndice

## Dicionário do __Data Mart__

## 1.`calendar` 

Informação de calendário.
 
 + **ID**: Constitui-se como a Surrogate Key (chave artificial).
 + **Date**: Contempla as datas ( dia, mês e ano) em que se realizaram transações (_date_)
 + **DayNumberOfWeek**:Identifica numericamente o dia da semana. (_numeric_)
 + **DayName**: Identifica textualmente o dia da semana. (_string_)
 + **MonthName**: Identifica textualmente o mês.(_string_)
 + **MonthNumberOfYear**: Identifica o mês numericamente.(_numeric_)
 + **DayNumberOfYear**: Identifica o dia do ano num formato de 365 dias. (_numeric_)
 + **WeekNumberOfYear**: Identifica a semana numericamente.(_numeric_)
 + **CalendarQuarter**: Refere o trimestre em que se realizou a transação. (_numeric_)
 + **CalendarYear**: Refere o ano.(_numeric_)
 + **DayNumberOfMonth**: Identifica o dia do mês.(_numeric_)
 
## 2.`product`

Informação sobre o produto.
 
 + **ProductKey**: Chave que identifica o produto (_factor_).
 + **ProductSubCategoryKey**: Chave que identifica a sub-categoria do produto (_factor_).
 + **ProductName**: Nome do produto.(_string_)
 + **StandarCost**: Custo de fabrico. (_numeric_)
 + **Color**: Cor do produto. (_string_)
 + **SafetyStockLevel**: Stock mínimo.(_numeric_)
 + **ListPrice**: Preço de venda dos produtos. (_numeric_)
 + **Size**: Tamanho do produto.(_numeric_)
 + **DaysToManufacture**: Dias para produzir.(_numeric_)
 + **DealerPrice**: Preço de venda para revendedores.(_numeric_)
 + **Class**: Classe de produto.(_string_)
 + **ModelName**: Nome do modelo do produto.(_string_)
 + **Description**: Descrição do produto. (_string_)
 + **Status**: Disponibilidade para vender.(_string_)
 + **SubCategory**: Sub-categoria. (_string_)
 + **Category**: Categoria. (_string_)
 + **StartDate**: Desde quando o produto está disponível para vender.(_date_)
 + **EndDate**: Desde quando o produto deixou de estar disponivel para venda. (_date_)
 
## 3.`productCategory`

Informação sobre a categoria do produto.

 + **ProductCategoryKey**: Chave que identifica univocamente o produto. (_factor_)
 + **EnglishProductCategoryName**: Nome da categoria do produto em Inglês.(_string_)
 + **SpanishProductCategoryName**: Nome da categoria do produto em Espanhol.(_string_)
 + **FrenchProductCategoryName**: Nome da categoria do produto em Francês.(_string_)

## 4.`productSubCategory`

Informação sobre a sub-categoria do produto.

 + **ProductCategoryKey**: Chave que identifica univocamente o produto. (_factor_)
 + **ProductSubCategoryKey**: Chave que identifica a sub-categoria do produto (_factor_).
 + **EnglishProductSubCategoryName**: Nome da sub-categoria do produto em Inglês.(_string_)
 + **SpanishProductSubCategoryName**: Nome da sub-categoria do produto em Espanhol.(string_)
 + **FrenchProductSubCategoryName**: Nome da sub-categoria do produto em Francês. (_string_)
 
## 5.`customers`

Informação sobre os clientes.

 + **CustomerKey**: Chave que identifica o cliente.(_factor_)
 + **GeographyKey**: Chave que identifica a cidade/código-postal do cliente.(_factor_)
 + **Name**: Nome do cliente.(_string_)
 + **BirthDate**: Data de nascimento do cliente.(_date_)
 + **MaritalStatus**: Estado-civil do cliente.(_string_)
 + **Gender**: Género do Cliente. (_string_)
 + **YearlyIncome**: Nível de rendimento do cliente.(_numeric_)
 + **NumberChildrenAtHome**: Número de crianças do cliente.(_numeric_)
 + **Occupation**: Profissão do cliente.(_string_)
 + **HouseOwnerFlag**: Se o cliente é proprietário ou não de habitação. (_numeric_)
 + **NumberCarsOwned**: Quantos carros cliente possui.(_numeric_)
 + **AddressLine**: Morada do cliente. (_string_)
 + **Phone**: Número de telefone do cliente. (_numeric_)
 + **DateFirstPurchase**: Data da primeira compra. (_date_)
 
## 6.`territory`

Informação geográfica.

 
 + **Territory Key**: Chave que identifica o território. (_factor_)
 + **Region**: Região. (_string_)
 + **Country**: País. (_string_)
 + **Group**: Região económica. (_string_)
  
## 7.`factsales`

Tabela de factos [Vendas]

 + **OrderDateKey**: Chave que identifica a data da compra.(_factor_)
 + **ProductKey**: Chave que identifica o produto (_factor_).
 + **CustomerKey**: Chave que identifica o cliente.(_factor_)
 + **SalesTerritoryKey**: Chave que identifica o território onde se realizou a compra.(_factor_)
 + **SalesOrderNumber**: Número que identifica a venda.(_numeric_)
 + **SalesOrderLineNumber**: Número que identifica as transações numa venda. (_string_)
 + **OrderQuantity**: Quantidade transacionada. (_numeric_)
 + **UnitPrice**: Preço unitário. (_numeric_)
 + **ProductStandardCost**: O custo do produto para a empresa. (_numeric_)
 + **SalesAmount**: Preço da transação.(_numeric_)
 + **TaxAmt**: Imposto sobre a venda. (_numeric_)
 + **Freight**: Custo de envio. (_numeric_)
 + **RegionMonthID**: Informação sobre quando (mês) foi realizada a venda e em que região. (_factor_)